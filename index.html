<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Happy Birthday, My Star! ‚ú®</title>

    <!-- 1. CDNs: Tailwind CSS, Google Fonts, Three.js, GSAP, Canvas Confetti -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Using Manrope (Satoshi equivalent) and Playfair Display -->
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Manrope:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.js"></script>

    <!-- 2. Custom CSS & Aurora Animation -->
    <style>
      /* Global Styles & Fonts */
      :root {
        --primary-bg: #0c0a09;
        --glass-bg: rgba(10, 8, 7, 0.6);
        --text-color: #f7f3f1;
        --secondary-text: #a8a29e;
        --pink-light: hsl(333, 70%, 55%);
        --pink-dark: hsl(350, 80%, 40%);
      }

      body {
        background-color: var(--primary-bg);
        font-family: "Manrope", sans-serif;
        color: var(--text-color);
        overflow: hidden;
      }

      h1,
      h2 {
        font-family: "Playfair Display", serif;
        font-weight: 900;
      }

      /* Layer 1: Animated Aurora Gradient Background */
      .aurora-background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle at 10% 20%,
            hsla(333, 70%, 55%, 0.4) 0%,
            transparent 40%
          ),
          radial-gradient(
            circle at 70% 80%,
            hsla(282, 82%, 54%, 0.3) 0%,
            transparent 35%
          ),
          radial-gradient(
            circle at 90% 10%,
            hsla(210, 89%, 60%, 0.3) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 20% 90%,
            hsla(35, 90%, 60%, 0.3) 0%,
            transparent 45%
          );
        background-size: 300% 300%;
        animation: auroraFlow 25s ease-in-out infinite alternate;
        z-index: -2;
      }

      @keyframes auroraFlow {
        0% {
          background-position: 0% 0%;
        }
        100% {
          background-position: 100% 100%;
        }
      }

      /* Layer 2: Three.js Hearts Canvas */
      #threejs-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
      }

      /* Typography: Text Gradient Effect */
      .text-gradient {
        background: linear-gradient(
          120deg,
          #ffffff,
          var(--pink-light),
          #f0abfc
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-fill-color: transparent;
        display: inline-block;
      }

      /* Main Content Card (Glassmorphism) */
      .glass-card {
        background-color: var(--glass-bg);
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
      }

      /* Button Styling */
      .pill-button {
        background: linear-gradient(
          90deg,
          var(--pink-light) 0%,
          var(--pink-dark) 100%
        );
        transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        box-shadow: 0 4px 15px rgba(255, 69, 142, 0.4);
        font-weight: 600;
      }

      .pill-button:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 8px 25px rgba(255, 69, 142, 0.7);
      }

      .pill-button:active {
        transform: translateY(0) scale(1);
        box-shadow: 0 2px 10px rgba(255, 69, 142, 0.4);
      }

      /* Step 1 Icon Pulsate */
      .heart-pulsate {
        animation: pulse 1.5s infinite ease-in-out alternate;
        text-shadow: 0 0 10px rgba(255, 69, 142, 0.8);
      }

      @keyframes pulse {
        from {
          transform: scale(1);
          opacity: 0.8;
        }
        to {
          transform: scale(1.1);
          opacity: 1;
        }
      }

      /* Step 4 Polaroid Style */
      .polaroid-container {
        transform: rotate(-5deg);
        transition: transform 0.2s ease-out;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
      }

      /* Progress Bar Styling */
      .progress-track {
        background-color: var(--glass-bg);
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        border-radius: 9999px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      }
      .progress-bar {
        background: linear-gradient(
          90deg,
          var(--pink-light) 0%,
          var(--pink-dark) 100%
        );
        transition: width 0.6s ease-out;
      }
    </style>
  </head>

  <body>
    <!-- Layer 1: Aurora Background -->
    <div class="aurora-background"></div>

    <!-- Layer 2: Three.js 3D Hearts Canvas -->
    <canvas id="threejs-canvas"></canvas>

    <!-- Progress Bar (Fixed Top, Max Width 512px) -->
    <div
      class="fixed top-0 left-1/2 -translate-x-1/2 w-11/12 max-w-lg p-3 z-50"
    >
      <div class="progress-track h-2 w-full">
        <div
          id="progress-bar"
          class="progress-bar h-full w-0 rounded-full"
        ></div>
      </div>
    </div>

    <!-- Main Content Container: items-start (UPAR KI OR) with minimal top padding -->
    <div
      id="main-content"
      class="min-h-screen flex items-start justify-center pt-10 pb-16 md:pt-16 p-4 overflow-hidden"
    >
      <!-- Steps Container: Max Width set to medium (lg:max-w-xl) -->
      <div
        id="steps-container"
        class="relative w-full max-w-lg md:max-w-xl lg:max-w-xl"
      >
        <!-- Step 1: The Grand Welcome (Responsive Padding and Text Size) -->
        <div
          id="step-1"
          class="step absolute w-full glass-card rounded-3xl p-8 md:p-12 text-center"
        >
          <div class="flex flex-col items-center gap-6">
            <span class="text-7xl heart-pulsate" data-gsap-target>‚ù§Ô∏è</span>
            <h2
              class="text-5xl md:text-6xl text-gradient mb-2"
              data-gsap-target
            >
              Hello My World,
            </h2>
            <p class="text-lg text-secondary-text" data-gsap-target>
              Every beat of my heart wispers your name. on this special day I
              wanted to create a small piece of magic just for you..
            </p>
            <button
              class="pill-button mt-4 px-10 py-3 rounded-full text-white text-lg transition-all"
              onclick="nextStep()"
              data-gsap-target
            >
              Click Here...
            </button>
          </div>
        </div>

        <!-- Step 2: The Core Message -->
        <div
          id="step-2"
          class="step absolute w-full glass-card rounded-3xl p-8 md:p-12 text-center hidden opacity-0 scale-95"
        >
          <div class="flex flex-col items-center gap-6">
            <span class="text-7xl" data-gsap-target>üéâ</span>
            <h2
              class="text-5xl md:text-6xl text-gradient mb-2"
              data-gsap-target
            >
              Happy Birthday!
            </h2>
            <p class="text-lg text-secondary-text" data-gsap-target>
              Today is very special day because you are were brought into this
              world. I am thankful to universe who gave me such a lavely person
              to me. Happy Birthday My Love...
            </p>
            <button
              class="pill-button mt-4 px-10 py-3 rounded-full text-white text-lg transition-all"
              onclick="nextStep()"
              data-gsap-target
            >
              There's more...
            </button>
          </div>
        </div>

        <!-- Step 3: The Reasons Why (Responsive Bento Grid) -->
        <div
          id="step-3"
          class="step absolute w-full glass-card rounded-3xl p-8 md:p-12 hidden opacity-0 scale-95"
        >
          <h2
            class="text-4xl md:text-5xl text-gradient text-center mb-8"
            data-gsap-target
          >
            A Few Things I Adore About You
          </h2>

          <div class="grid grid-cols-4 gap-4">
            <!-- Card 1 (2-column on sm+ screens) -->
            <div
              class="col-span-4 sm:col-span-2 p-5 rounded-xl bg-gray-900/40 border border-white/10"
              data-gsap-target
            >
              <h3 class="text-xl font-bold text-pink-300 mb-1">
                ‚ú® Your Unmatched Kindness
              </h3>
              <p class="text-sm text-secondary-text">
                Your softness, your gentle nature‚Ä¶ My love, the way you love me
                is unlike anything I‚Äôve ever known. This beauty of yours‚Äî it
                touches my heart deeply.
              </p>
            </div>

            <!-- Card 2 (2-column on sm+ screens) -->
            <div
              class="col-span-4 sm:col-span-2 p-5 rounded-xl bg-gray-900/40 border border-white/10"
              data-gsap-target
            >
              <h3 class="text-xl font-bold text-pink-300 mb-1">
                üòä That Smile
              </h3>
              <p class="text-sm text-secondary-text">
                The way your smile makes everything feel lighter...
              </p>
            </div>

            <!-- Card 3 (Full width) -->
            <div
              class="col-span-4 p-5 rounded-xl bg-gray-900/40 border border-white/10"
              data-gsap-target
            >
              <h3 class="text-xl font-bold text-pink-300 mb-1">
                üåü Your Radiant Spirit
              </h3>
              <p class="text-sm text-secondary-text">
                Your gentleness, your softness‚Ä¶ My love, the way you love me is
                something no one else could ever give. This beauty of yours‚Äî it
                touches my heart in the deepest way.
              </p>
            </div>
          </div>

          <div class="text-center">
            <button
              class="pill-button mt-8 px-10 py-3 rounded-full text-white text-lg transition-all"
              onclick="nextStep()"
              data-gsap-target
            >
              Remember this?
            </button>
          </div>
        </div>

        <!-- Step 4: The Shared Memory (Image Max Width) -->
        <div
          id="step-4"
          class="step absolute w-full glass-card rounded-3xl p-8 md:p-12 text-center hidden opacity-0 scale-95"
        >
          <div class="flex flex-col items-center gap-6">
            <h2
              class="text-4xl md:text-5xl text-gradient mb-4"
              data-gsap-target
            >
              That One Time...
            </h2>

            <!-- Polaroid Container (w-full max-w-xs keeps the image from dominating the desktop view) -->
            <div
              id="polaroid"
              class="polaroid-container bg-white p-2.5 shadow-xl transition-all w-full max-w-xs mx-auto"
              data-gsap-target
            >
              <img
                src="1.jpg"
                alt="Shared Memory Placeholder"
                class="w-full h-auto object-cover aspect-square"
              />
              <p
                class="text-sm text-center text-gray-800 pt-3 pb-1 font-sans font-medium"
              >
                Our favorite memory.
              </p>
            </div>

            <p class="text-lg text-secondary-text mt-4" data-gsap-target>
              Every moment with you feels like a scene from a movie I'd watch on
              repeat.
            </p>
            <button
              class="pill-button mt-4 px-10 py-3 rounded-full text-white text-lg transition-all"
              onclick="nextStep()"
              data-gsap-target
            >
              One last thing...
            </button>
          </div>
        </div>

        <!-- Step 5: The Birthday Wish & Finale -->
        <div
          id="step-5"
          class="step absolute w-full glass-card rounded-3xl p-8 md:p-12 text-center hidden opacity-0 scale-95"
        >
          <div class="flex flex-col items-center gap-6">
            <span class="text-7xl" data-gsap-target>üéÇ</span>
            <h2
              class="text-4xl md:text-5xl text-gradient mb-2"
              data-gsap-target
            >
              My Wish For You
            </h2>
            <p class="text-lg text-secondary-text" data-gsap-target>
              You are my soulmant, my partner and my love. On your birthday i
              wont to remind you of all the reasons why i love you. Happy
              Birthday Love...
            </p>

            <!-- Final Message (Responsive Text Size) -->
            <p
              id="final-message"
              class="text-4xl md:text-5xl font-bold text-gradient mt-8 mb-4 opacity-0"
            >
              Happy Birthday, Janeman...‚ù§Ô∏è
            </p>

            <button
              id="celebrate-btn"
              class="pill-button mt-4 px-10 py-3 rounded-full text-white text-xl transition-all"
              onclick="celebrate()"
              data-gsap-target
            >
              Celebrate!
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- 3. JavaScript: Three.js, GSAP Logic, and Interaction -->
    <script>
      // --- Core Variables & Step Management ---
      const totalSteps = 5;
      let currentStep = 1;
      const steps = [];
      for (let i = 1; i <= totalSteps; i++) {
        steps.push(document.getElementById(`step-${i}`));
      }
      const progressBar = document.getElementById("progress-bar");
      const stepsContainer = document.getElementById("steps-container");
      const polaroid = document.getElementById("polaroid");

      // --- Progress Bar Update Function ---
      const updateProgressBar = (step) => {
        const width = ((step - 1) / (totalSteps - 1)) * 100;
        progressBar.style.width = `${width}%`;
      };

      // Initial setup
      updateProgressBar(currentStep);
      gsap.set(steps[0], { opacity: 1, scale: 1, zIndex: 10 });
      gsap.from(steps[0].querySelectorAll("[data-gsap-target]"), {
        opacity: 0,
        y: 20,
        stagger: 0.15,
        delay: 0.5,
        duration: 0.8,
        ease: "power2.out",
      });

      // --- Step Transition Logic ---
      function nextStep() {
        if (currentStep >= totalSteps) return;

        const current = steps[currentStep - 1];
        const next = steps[currentStep];

        // 1. Out Animation (Current Step)
        gsap.to(current, {
          opacity: 0,
          scale: 0.95,
          y: -50,
          zIndex: 0,
          duration: 0.6,
          ease: "power2.inOut",
          onComplete: () => {
            current.classList.add("hidden");
          },
        });

        // 2. Setup & In Animation (Next Step)
        next.classList.remove("hidden");
        gsap.set(next, { opacity: 0, scale: 0.95, y: 50, zIndex: 10 });

        gsap.to(next, {
          opacity: 1,
          scale: 1,
          y: 0,
          duration: 0.8,
          ease: "power2.out",
          onStart: () => {
            // Staggered In-animation for internal elements
            gsap.from(next.querySelectorAll("[data-gsap-target]"), {
              opacity: 0,
              y: 20,
              stagger: 0.1,
              delay: 0.3,
              duration: 0.7,
              ease: "power2.out",
            });
          },
        });

        // 3. Update State
        currentStep++;
        updateProgressBar(currentStep);
      }

      // --- Step 4: Polaroid Parallax Effect ---
      if (polaroid) {
        stepsContainer.addEventListener("mousemove", (e) => {
          if (currentStep !== 4) return;

          const rect = stepsContainer.getBoundingClientRect();
          const centerX = rect.left + rect.width / 2;
          const centerY = rect.top + rect.height / 2;
          const mouseX = e.clientX - centerX;
          const mouseY = e.clientY - centerY;

          const rotateY = gsap.utils.mapRange(
            -rect.width / 2,
            rect.width / 2,
            -10,
            10,
            mouseX
          );
          const rotateX = gsap.utils.mapRange(
            -rect.height / 2,
            rect.height / 2,
            10,
            -10,
            mouseY
          );

          gsap.to(polaroid, {
            rotationX: rotateX * 0.4,
            rotationY: rotateY * 0.4,
            scale: 1.05,
            duration: 1,
            ease: "power2.out",
          });
        });

        stepsContainer.addEventListener("mouseleave", () => {
          if (currentStep !== 4) return;
          gsap.to(polaroid, {
            rotationX: 0,
            rotationY: 0,
            scale: 1,
            duration: 0.8,
            ease: "elastic.out(1, 0.3)",
          });
        });
      }

      // --- The Grand Finale Sequence ---
      const finalMessage = document.getElementById("final-message");
      const celebrateBtn = document.getElementById("celebrate-btn");

      function celebrate() {
        // 1. Disable Button & Fade Out
        celebrateBtn.disabled = true;
        gsap.to(celebrateBtn, { opacity: 0, duration: 0.5 });

        // 2. Reveal Final Text
        gsap.to(finalMessage, {
          opacity: 1,
          y: -10,
          duration: 1.5,
          ease: "power3.out",
        });

        // 3. Confetti Explosion
        setTimeout(() => {
          // Powerful bursts from corners
          confetti({
            particleCount: 150,
            startVelocity: 60,
            spread: 80,
            origin: { x: 0.2, y: 1.0 },
            colors: ["#ff7e5f", "#feb47b", "#f94892", "#f0abfc"],
          });
          confetti({
            particleCount: 150,
            startVelocity: 60,
            spread: 80,
            origin: { x: 0.8, y: 1.0 },
            colors: ["#ff7e5f", "#feb47b", "#f94892", "#f0abfc"],
          });
        }, 300);

        // Continuous gentle shower for 5s
        const duration = 5 * 1000;
        const animationEnd = Date.now() + duration;

        (function frame() {
          // Standard colorful confetti
          confetti({
            particleCount: 2,
            angle: 60,
            spread: 55,
            origin: { x: 0 },
            colors: ["#ff7e5f", "#feb47b", "#f94892", "#ffffff"],
          });
          confetti({
            particleCount: 2,
            angle: 120,
            spread: 55,
            origin: { x: 1 },
            colors: ["#ff7e5f", "#feb47b", "#f94892", "#ffffff"],
          });

          // Emoji confetti
          confetti({
            particleCount: 1,
            angle: gsap.utils.random(0, 360),
            spread: 360,
            shapes: ["heart", "star"],
            scalar: 1.5,
            colors: ["#ff7e5f"],
            origin: {
              x: gsap.utils.random(0.1, 0.9),
              y: gsap.utils.random(0.2, 0.4),
            },
          });

          if (Date.now() < animationEnd) {
            requestAnimationFrame(frame);
          }
        })();

        // 4. 3D Hearts Finale Animation (Swirl Out & Up)
        gsap.to(heartObjects, {
          y: 500,
          x: (i) =>
            heartObjects[i].position.x * 2 + gsap.utils.random(-200, 200),
          rotationX: (i) =>
            heartObjects[i].rotation.x + gsap.utils.random(5, 15),
          rotationY: (i) =>
            heartObjects[i].rotation.y + gsap.utils.random(5, 15),
          duration: 5,
          ease: "power2.in",
          stagger: 0.02,
          onUpdate: function () {
            this.targets()[0].material.opacity = 0.5 * (1 - this.ratio);
          },
          onComplete: () => {
            heartObjects.forEach((heart) => scene.remove(heart));
            heartObjects.length = 0;
          },
        });
      }

      // --- Three.js 3D Floating Hearts Setup ---
      const canvas = document.getElementById("threejs-canvas");
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );
      const renderer = new THREE.WebGLRenderer({
        canvas: canvas,
        alpha: true,
        antialias: true,
      });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(window.devicePixelRatio);

      // Lighting
      const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
      scene.add(ambientLight);
      const pointLight = new THREE.PointLight(0xffffff, 1.5);
      pointLight.position.set(10, 10, 10);
      scene.add(pointLight);

      camera.position.z = 10;

      // Custom Heart Geometry
      function createHeartShape() {
        const shape = new THREE.Shape();
        const x = 0,
          y = 0;
        shape.moveTo(x + 0.5, y + 0.5);
        shape.bezierCurveTo(x + 0.5, y + 0.5, x + 0.4, y, x, y);
        shape.bezierCurveTo(x - 0.6, y, x - 0.6, y + 0.7, x - 0.6, y + 0.7);
        shape.bezierCurveTo(
          x - 0.6,
          y + 1.1,
          x - 0.3,
          y + 1.54,
          x + 0.5,
          y + 1.9
        );
        shape.bezierCurveTo(
          x + 1.3,
          y + 1.54,
          x + 1.6,
          y + 1.1,
          x + 1.6,
          y + 0.7
        );
        shape.bezierCurveTo(x + 1.6, y + 0.7, x + 1.6, y, x + 1.0, y);
        shape.bezierCurveTo(x + 0.7, y, x + 0.5, y + 0.5, x + 0.5, y + 0.5);

        const extrudeSettings = {
          depth: 0.1,
          bevelEnabled: true,
          bevelSegments: 2,
          steps: 2,
          bevelSize: 0.1,
          bevelThickness: 0.1,
        };
        const geometry = new THREE.ExtrudeGeometry(shape, extrudeSettings);

        geometry.scale(0.5, 0.5, 0.5);
        geometry.translate(0, -0.7, 0);
        return geometry;
      }

      const heartGeometry = createHeartShape();
      const heartObjects = [];
      const heartCount = 25;

      for (let i = 0; i < heartCount; i++) {
        const material = new THREE.MeshPhongMaterial({
          color: new THREE.Color(gsap.utils.random(0xff3366, 0xff0099)),
          specular: 0xffffff,
          shininess: 100,
          opacity: 0.5,
          transparent: true,
          depthWrite: false,
          side: THREE.DoubleSide,
        });

        const heart = new THREE.Mesh(heartGeometry, material);

        heart.position.set(
          gsap.utils.random(-20, 20),
          gsap.utils.random(-15, 15),
          gsap.utils.random(-10, 5)
        );
        const scale = gsap.utils.random(0.5, 1.5);
        heart.scale.set(scale, scale, scale);
        heart.rotation.set(
          gsap.utils.random(0, Math.PI * 2),
          gsap.utils.random(0, Math.PI * 2),
          gsap.utils.random(0, Math.PI * 2)
        );

        heart.userData = {
          initialY: heart.position.y,
          sineOffset: gsap.utils.random(0, Math.PI * 2),
        };

        scene.add(heart);
        heartObjects.push(heart);
      }

      // Animation Loop
      const clock = new THREE.Clock();
      function animate() {
        requestAnimationFrame(animate);
        const elapsedTime = clock.getElapsedTime();

        heartObjects.forEach((heart, index) => {
          // Subtle Sine-wave motion (Floating)
          heart.position.y =
            heart.userData.initialY +
            Math.sin(elapsedTime * 0.2 + heart.userData.sineOffset) * 0.5;
          heart.rotation.x += 0.001 * (index % 2 === 0 ? 1 : -1);
          heart.rotation.y += 0.002 * (index % 3 === 0 ? 1 : -1);
        });

        renderer.render(scene, camera);
      }
      animate();

      // Handle Window Resize (Crucial for Display Size coverage)
      window.addEventListener("resize", () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });
    </script>
  </body>
</html>
